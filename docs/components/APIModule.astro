---
import { Code } from "@astrojs/starlight/components";

const { apiDoc, level, showModuleName = false } = Astro.props;

const ModuleTag = `h${level}`;
const HeadingTag = `h${level + 1}`;
const ItemTag = `h${level + 2}`;
---

{showModuleName && <ModuleTag>{apiDoc.id}</ModuleTag>}
{
  apiDoc.types?.length > 0 && (
    <>
      <HeadingTag id="types"> Types</HeadingTag>
      {apiDoc.types.map((type) => {
        return (
          <>
            <ItemTag id={type.name}>{type.name}</ItemTag>
            <div set:html={type.documentation} />
            <Code lang="ReScript" code={type.signature} />
          </>
        );
      })}
    </>
  )
}
{
  apiDoc.values?.length > 0 && (
    <>
      <HeadingTag id="values"> Values </HeadingTag>

      {apiDoc.values.map((value) => {
        return (
          <>
            <ItemTag id={value.name}>{value.name}</ItemTag>
            <div set:html={value.documentation} />
            <Code lang="ReScript" code={value.signature} />
          </>
        );
      })}
    </>
  )
}
{
  apiDoc.modules?.length > 0 && (
    <>
      <HeadingTag id="modules"> Modules </HeadingTag>
      {apiDoc.modules.map((m) => {
        return (
          <Astro.self apiDoc={m} level={level + 1} showModuleName={true} />
        );
      })}
    </>
  )
}
