// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Z$Kaplay from "@nojaf/rescript-kaplay/src/Components/Z.res.mjs";
import * as Pos$Kaplay from "@nojaf/rescript-kaplay/src/Components/Pos.res.mjs";
import * as Area$Kaplay from "@nojaf/rescript-kaplay/src/Components/Area.res.mjs";
import * as Move$Kaplay from "@nojaf/rescript-kaplay/src/Components/Move.res.mjs";
import * as Anchor$Kaplay from "@nojaf/rescript-kaplay/src/Components/Anchor.res.mjs";
import * as Sprite$Kaplay from "@nojaf/rescript-kaplay/src/Components/Sprite.res.mjs";
import * as Pokemon$Skirmish from "../Pokemon.res.mjs";
import * as GameObjRaw$Kaplay from "@nojaf/rescript-kaplay/src/Components/GameObjRaw.res.mjs";
import * as GameContext$Skirmish from "../GameContext.res.mjs";

GameObjRaw$Kaplay.Comp({});

Sprite$Kaplay.Comp({});

Pos$Kaplay.Comp({});

Move$Kaplay.Comp({});

Anchor$Kaplay.Comp({});

Z$Kaplay.Comp({});

Area$Kaplay.Comp({});

let spriteName = "flame";

function load() {
  GameContext$Skirmish.k.loadSprite(spriteName, "/sprites/moves/flame.png");
  GameContext$Skirmish.k.on("Ember", Pokemon$Skirmish.tag, (pokemon, param) => {
    let flame = pokemon.add([
      GameContext$Skirmish.k.sprite(spriteName),
      GameContext$Skirmish.k.pos(0, 0),
      GameContext$Skirmish.k.move(pokemon.direction, 120),
      GameContext$Skirmish.k.z(-1),
      GameContext$Skirmish.k.area(),
      pokemon.direction.y < 0 ? GameContext$Skirmish.k.anchor("bot") : GameContext$Skirmish.k.anchor("top")
    ]);
    flame.onCollide(Pokemon$Skirmish.tag, (other, _collision) => {
      if (other.pokemonId !== pokemon.pokemonId) {
        console.log("Ember hit", other.pokemonId);
        other.hp = other.hp - 4 | 0;
        flame.destroy();
        return;
      }
    });
  });
}

export {
  spriteName,
  load,
}
/*  Not a pure module */
